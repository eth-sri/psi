
def nice(y){
    x := sampleFrom("(x;y) => [-y<=x]*[x<=y]*x^2*lambda[x]",y);
    return x;
}

def main(){
    x := nice(3);
    y := nice(4);
    return x+y; // expected: (-1/23040·[-1+-r≤0]·r⁵+-1/6·[-r+1≤0]·r+-27/512·[-1+-r≤0]·r+1/23040·[-1+r≤0]·[-r+1≠0]·r⁵+1/36·[-1+-r≠0]·[1+r≤0]·r²+1/36·[-r+1≤0]·r²+1/6·[-1+-r≠0]·[1+r≤0]·r+27/512·[-1+r≤0]·[-r+1≠0]·r+3/256·[-1+-r≤0]·r²+3/256·[-1+r≤0]·[-r+1≠0]·r²+4/15·[-1+-r≠0]·[1+r≤0]+4/15·[-r+1≤0]+81/1280·[-1+-r≤0]+81/1280·[-1+r≤0]·[-r+1≠0])·[-7+-r≤0]·[-7+r≤0]·λ[r]
}
