
def newDistr(w){
    (x,y,z) := sampleFrom("(x,y,z;w) => [-1<=x]*[x<=1]*[-1<=y]*[y<=1]*|x|*|y|*lambda[x]*lambda[y]*delta(w)[z]",w);
    return (x,y,z);
}

def main(){
    (x,y,z) := newDistr(3);
    return (x+y+z); // expected: ((-1/2·r+3/2)·(-6·[-r+2≤0]·r+9·[-r+2≤0]+[-2+r≤0]·[-r+2≠0]+[-r+2≤0]·r²)+-11/3·[-2+r≤0]·[-r+2≠0]+-3/2·[-2+r≤0]·[-r+2≠0]·r²+-3·[-r+2≤0]·r²+-9·[-r+2≤0]+1/3·[-r+2≤0]·r³+1/6·[-2+r≤0]·[-r+2≠0]·r³+4·[-2+r≤0]·[-r+2≠0]·r+9·[-r+2≤0]·r)·[-3+r≤0]·[-r+1≤0]·λ[r]+((-3/2+1/2·r)·(-6·[-4+r≤0]·[-r+4≠0]·r+9·[-4+r≤0]·[-r+4≠0]+[-4+r≤0]·[-r+4≠0]·r²+[-r+4≤0])+-1/3·[-4+r≤0]·[-r+4≠0]·r³+-1/3·[-r+4≤0]+-1/6·[-r+4≠0]·[-r+4≤0]·r³+-4·[-r+4≠0]·[-r+4≤0]·r+-9·[-4+r≤0]·[-r+4≠0]·r+3/2·[-r+4≠0]·[-r+4≤0]·r²+3·[-4+r≤0]·[-r+4≠0]·r²+8/3·[-r+4≠0]·[-r+4≤0]+9·[-4+r≤0]·[-r+4≠0])·[-5+r≤0]·[-r+3≤0]·λ[r]+(-1/2·r+3/2)·(-4·[-3+r≤0]·r+4·[-3+r≤0]+[-3+r≤0]·r²+[-r+3≠0]·[-r+3≤0])·[-4+r≤0]·[-r+2≤0]·λ[r]+(-3/2+1/2·r)·(-8·[-r+3≠0]·[-r+3≤0]·r+16·[-r+3≠0]·[-r+3≤0]+[-3+r≤0]+[-r+3≠0]·[-r+3≤0]·r²)·[-4+r≤0]·[-r+2≤0]·λ[r]+-1/6·[-4+r≤0]·[-r+2≤0]·[-r+3≠0]·r³·λ[r]+-23/2·[-4+r≤0]·[-r+3≠0]·[-r+3≤0]·r·λ[r]+-2·[-3+r≤0]·[-r+2≤0]·r²·λ[r]+-7/3·[-3+r≤0]·[-r+2≤0]·λ[r]+-9/2·[-3+r≤0]·[-r+2≤0]·[-r+3≠0]·r·λ[r]+1/3·[-3+r≤0]·[-r+2≤0]·r³·λ[r]+103/6·[-4+r≤0]·[-r+3≠0]·[-r+3≤0]·λ[r]+3/2·[-3+r≤0]·[-r+2≤0]·[-r+3≠0]·r²·λ[r]+4·[-3+r≤0]·[-r+2≤0]·r·λ[r]+5/2·[-4+r≤0]·[-r+3≠0]·[-r+3≤0]·r²·λ[r]+9/2·[-3+r≤0]·[-r+2≤0]·[-r+3≠0]·λ[r]
}
