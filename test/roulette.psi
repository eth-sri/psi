// skipped
// TODO: make fast with boundschecking enabled

dat Gun{
	cylinder: ð”¹[];
	def Gun(){
		cylinder = array(6,0:ð”¹);
		cylinder[0] = 1:ð”¹; // add one bullet
	}
	def shift(k:â„•){
		c := cylinder;
		for i in [0..6){
			cylinder[i] = c[(i+k)%6];
		}		
	}
	def shuffle(){
		shift(uniformInt(0,5) coerce â„•);
	}
	def shoot(){
		r := cylinder[0];
		shift(1);
		return r;
	}
}

def experiment1(){
	gun := Gun();
	alive := 1:ð”¹;
	gun.shuffle();
	alive &= !gun.shoot();
	gun.shuffle();
	alive &= !gun.shoot();
	return alive;
}

def experiment2(){
	gun := Gun();
	alive := 1:ð”¹;
	gun.shuffle();
	alive &= !gun.shoot();
	alive &= !gun.shoot();
	return alive;	
}

def main(){
	pâ‚ := expectation(infer(experiment1));
	pâ‚‚ := expectation(infer(experiment2));
	return pâ‚ > pâ‚‚; // expected: Î´(1)[r]
}
